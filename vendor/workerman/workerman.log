2018-02-21 15:26:53 think\exception\ErrorException: Object of class Workerman\Connection\TcpConnection could not be converted to string in E:\source.admin\application\admin\controller\SocketController.php:24
Stack trace:
#0 E:\source.admin\application\admin\controller\SocketController.php(24): think\Error::appError(4096, 'Object of class...', 'E:\\source.admin...', 24, Array)
#1 [internal function]: app\admin\controller\SocketController->onMessage(Object(Workerman\Connection\TcpConnection), 'tom')
#2 E:\source.admin\vendor\workerman\workerman-for-win\Connection\TcpConnection.php(629): call_user_func(Array, Object(Workerman\Connection\TcpConnection), 'tom')
#3 [internal function]: Workerman\Connection\TcpConnection->baseRead(Resource id #59)
#4 E:\source.admin\vendor\workerman\workerman-for-win\Events\Select.php(286): call_user_func_array(Array, Array)
#5 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(856): Workerman\Events\Select->loop()
#6 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(473): Workerman\Worker->run()
#7 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(382): Workerman\Worker::runAllWorkers()
#8 E:\source.admin\vendor\topthink\think-worker\src\Server.php(48): Workerman\Worker::runAll()
#9 [internal function]: think\worker\Server->__construct()
#10 E:\source.admin\thinkphp\library\think\App.php(359): ReflectionClass->newInstanceArgs(Array)
#11 E:\source.admin\thinkphp\library\think\Loader.php(459): think\App::invokeClass('app\\admin\\contr...')
#12 E:\source.admin\thinkphp\library\think\App.php(571): think\Loader::controller('socket', 'controller', true, 'Error')
#13 E:\source.admin\thinkphp\library\think\App.php(456): think\App::module(Array, Array, true)
#14 E:\source.admin\thinkphp\library\think\App.php(139): think\App::exec(Array, Array)
#15 E:\source.admin\thinkphp\start.php(19): think\App::run()
#16 E:\source.admin\server.php(6): require('E:\\source.admin...')
#17 {main}
2018-02-21 09:06:54 Error: Using $this when not in object context in E:\source.admin\public\workerman.php:18
Stack trace:
#0 [internal function]: {closure}('111...')
#1 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Object(Closure), Array)
#2 [internal function]: PHPSocketIO\Event\Emitter->emit('chat message', '111...')
#3 E:\source.admin\vendor\workerman\phpsocket.io\src\Socket.php(307): call_user_func_array(Array, Array)
#4 E:\source.admin\vendor\workerman\phpsocket.io\src\Socket.php(269): PHPSocketIO\Socket->onevent(Array)
#5 E:\source.admin\vendor\workerman\phpsocket.io\src\Client.php(202): PHPSocketIO\Socket->onpacket(Array)
#6 [internal function]: PHPSocketIO\Client->ondecoded(Array)
#7 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#8 E:\source.admin\vendor\workerman\phpsocket.io\src\Parser\Decoder.php(34): PHPSocketIO\Event\Emitter->emit('decoded', Array)
#9 E:\source.admin\vendor\workerman\phpsocket.io\src\Client.php(182): PHPSocketIO\Parser\Decoder->add('2["chat message...')
#10 [internal function]: PHPSocketIO\Client->ondata('2["chat message...')
#11 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#12 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Socket.php(187): PHPSocketIO\Event\Emitter->emit('data', '2["chat message...')
#13 [internal function]: PHPSocketIO\Engine\Socket->onPacket(Array)
#14 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#15 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transport.php(56): PHPSocketIO\Event\Emitter->emit('packet', Array)
#16 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transports\Polling.php(151): PHPSocketIO\Engine\Transport->onPacket(Array)
#17 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transports\Polling.php(120): PHPSocketIO\Engine\Transports\Polling->onData('27:42["chat mes...')
#18 [internal function]: PHPSocketIO\Engine\Transports\Polling->dataRequestOnEnd(Object(PHPSocketIO\Engine\Protocols\Http\Request))
#19 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Protocols\SocketIO.php(177): call_user_func(Array, Object(PHPSocketIO\Engine\Protocols\Http\Request))
#20 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Protocols\SocketIO.php(89): PHPSocketIO\Engine\Protocols\SocketIO::emitEnd(Object(Workerman\Connection\TcpConnection), Object(PHPSocketIO\Engine\Protocols\Http\Request))
#21 [internal function]: PHPSocketIO\Engine\Protocols\SocketIO::onData(Object(Workerman\Connection\TcpConnection), '27:42["chat mes...')
#22 E:\source.admin\vendor\workerman\workerman-for-win\Connection\TcpConnection.php(629): call_user_func('\\PHPSocketIO\\En...', Object(Workerman\Connection\TcpConnection), '27:42["chat mes...')
#23 [internal function]: Workerman\Connection\TcpConnection->baseRead(Resource id #50)
#24 E:\source.admin\vendor\workerman\workerman-for-win\Events\Select.php(286): call_user_func_array(Array, Array)
#25 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(856): Workerman\Events\Select->loop()
#26 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(473): Workerman\Worker->run()
#27 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(382): Workerman\Worker::runAllWorkers()
#28 E:\source.admin\public\workerman.php(22): Workerman\Worker::runAll()
#29 {main}
2018-02-21 09:38:21 Error: Call to a member function emit() on null in E:\source.admin\public\workerman.php:32
Stack trace:
#0 [internal function]: {closure}('aaaa')
#1 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Object(Closure), Array)
#2 [internal function]: PHPSocketIO\Event\Emitter->emit('chat message', 'aaaa')
#3 E:\source.admin\vendor\workerman\phpsocket.io\src\Socket.php(307): call_user_func_array(Array, Array)
#4 E:\source.admin\vendor\workerman\phpsocket.io\src\Socket.php(269): PHPSocketIO\Socket->onevent(Array)
#5 E:\source.admin\vendor\workerman\phpsocket.io\src\Client.php(202): PHPSocketIO\Socket->onpacket(Array)
#6 [internal function]: PHPSocketIO\Client->ondecoded(Array)
#7 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#8 E:\source.admin\vendor\workerman\phpsocket.io\src\Parser\Decoder.php(34): PHPSocketIO\Event\Emitter->emit('decoded', Array)
#9 E:\source.admin\vendor\workerman\phpsocket.io\src\Client.php(182): PHPSocketIO\Parser\Decoder->add('2["chat message...')
#10 [internal function]: PHPSocketIO\Client->ondata('2["chat message...')
#11 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#12 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Socket.php(187): PHPSocketIO\Event\Emitter->emit('data', '2["chat message...')
#13 [internal function]: PHPSocketIO\Engine\Socket->onPacket(Array)
#14 E:\source.admin\vendor\workerman\phpsocket.io\src\Event\Emitter.php(91): call_user_func_array(Array, Array)
#15 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transport.php(56): PHPSocketIO\Event\Emitter->emit('packet', Array)
#16 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transports\Polling.php(151): PHPSocketIO\Engine\Transport->onPacket(Array)
#17 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Transports\Polling.php(120): PHPSocketIO\Engine\Transports\Polling->onData('25:42["chat mes...')
#18 [internal function]: PHPSocketIO\Engine\Transports\Polling->dataRequestOnEnd(Object(PHPSocketIO\Engine\Protocols\Http\Request))
#19 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Protocols\SocketIO.php(177): call_user_func(Array, Object(PHPSocketIO\Engine\Protocols\Http\Request))
#20 E:\source.admin\vendor\workerman\phpsocket.io\src\Engine\Protocols\SocketIO.php(89): PHPSocketIO\Engine\Protocols\SocketIO::emitEnd(Object(Workerman\Connection\TcpConnection), Object(PHPSocketIO\Engine\Protocols\Http\Request))
#21 [internal function]: PHPSocketIO\Engine\Protocols\SocketIO::onData(Object(Workerman\Connection\TcpConnection), '25:42["chat mes...')
#22 E:\source.admin\vendor\workerman\workerman-for-win\Connection\TcpConnection.php(629): call_user_func('\\PHPSocketIO\\En...', Object(Workerman\Connection\TcpConnection), '25:42["chat mes...')
#23 [internal function]: Workerman\Connection\TcpConnection->baseRead(Resource id #54)
#24 E:\source.admin\vendor\workerman\workerman-for-win\Events\Select.php(286): call_user_func_array(Array, Array)
#25 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(856): Workerman\Events\Select->loop()
#26 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(473): Workerman\Worker->run()
#27 E:\source.admin\vendor\workerman\workerman-for-win\Worker.php(382): Workerman\Worker::runAllWorkers()
#28 E:\source.admin\public\workerman.php(35): Workerman\Worker::runAll()
#29 {main}
